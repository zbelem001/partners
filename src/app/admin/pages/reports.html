<div class="reports-page">
  
  <div class="page-header">
    <div class="header-left">
      <h1>Rapports & Statistiques</h1>
      <p>Indicateurs de performance et analyse des données</p>
    </div>
    <div class="header-right">
      <div class="date-range">
        <span>Période :</span>
        <select>
          <option>6 derniers mois</option>
          <option>Année courante (2026)</option>
          <option>Année 2025</option>
        </select>
      </div>
      <button class="btn btn-outline">Télécharger PDF</button>
    </div>
  </div>

  <!-- KPIS -->
  <div class="kpi-grid">
    <div class="kpi-card" *ngFor="let kpi of kpis">
      <div class="kpi-label">{{ kpi.label }}</div>
      <div class="kpi-value">{{ kpi.value }}</div>
      <div class="kpi-trend" [ngClass]="kpi.trendDirection">
        <span class="icon" *ngIf="kpi.trendDirection === 'up'">▲</span>
        <span class="icon" *ngIf="kpi.trendDirection === 'down'">▼</span>
        <span class="icon" *ngIf="kpi.trendDirection === 'neutral'">=</span>
        {{ kpi.trend }} vs période préc.
      </div>
    </div>
  </div>

  <div class="charts-grid">
    
    <!-- SECTOR DISTRIBUTION (Circular) -->
    <div class="chart-card">
      <h3>Répartition par Secteur</h3>
      <div class="chart-content flex-row">
        <!-- CSS Pie Chart Representation -->
        <div class="pie-chart-container">
           <svg viewBox="0 0 100 100" class="pie-chart-svg">
             <!-- Simple representation with circles for demo purposes, assume fully calculated in real chart lib -->
             <circle r="25" cx="50" cy="50" fill="transparent" stroke="#e0e0e0" stroke-width="50"></circle>
             <circle r="25" cx="50" cy="50" fill="transparent" stroke="#003566" stroke-width="50" stroke-dasharray="45 100" transform="rotate(-90 50 50)"></circle>
             <circle r="25" cx="50" cy="50" fill="transparent" stroke="#ff5400" stroke-width="50" stroke-dasharray="30 100" transform="rotate(72 50 50)"></circle>
             <circle r="25" cx="50" cy="50" fill="transparent" stroke="#2ecc71" stroke-width="50" stroke-dasharray="15 100" transform="rotate(180 50 50)"></circle>
             <circle r="25" cx="50" cy="50" fill="transparent" stroke="#95a5a6" stroke-width="50" stroke-dasharray="10 100" transform="rotate(234 50 50)"></circle>
           </svg>
           <div class="donut-hole"></div>
        </div>
        
        <div class="legend">
          <div class="legend-item" *ngFor="let sector of sectors">
            <span class="dot" [style.background-color]="sector.color"></span>
            <div class="info">
              <span class="name">{{ sector.label }}</span>
              <span class="val">{{ sector.percentage }}% ({{ sector.count }})</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ACTIVITY BAR CHART -->
    <div class="chart-card">
      <h3>Évolution des Conventions (Semestre 1)</h3>
      <div class="chart-content">
        <div class="bar-chart">
          <div class="y-axis">
            <span>10</span>
            <span>5</span>
            <span>0</span>
          </div>
          <div class="bars-container">
            <div class="bar-group" *ngFor="let data of yearlyStats">
              <div class="bars">
                <div class="bar initiated" [style.height.px]="data.initiated * 20" title="Initiées: {{data.initiated}}"></div>
                <div class="bar signed" [style.height.px]="data.signed * 20" title="Signées: {{data.signed}}"></div>
              </div>
              <span class="x-label">{{ data.month }}</span>
            </div>
          </div>
        </div>
        <div class="chart-legend">
          <span class="item"><span class="box initiated"></span> Initiées</span>
          <span class="item"><span class="box signed"></span> Signées</span>
        </div>
      </div>
    </div>

  </div>

  <!-- REPORTS LIST -->
  <div class="reports-list-section">
    <h3>Rapports Disponibles</h3>
    <div class="table-container">
      <table class="data-table">
        <thead>
          <tr>
            <th>Nom du Rapport</th>
            <th>Description</th>
            <th>Fréquence</th>
            <th>Format</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Bilan Mensuel Activités</strong></td>
            <td>Synthèse des prospects, signatures et événements du mois</td>
            <td>Mensuel</td>
            <td><span class="badge">PDF</span></td>
            <td><button class="btn-link">Télécharger</button></td>
          </tr>
          <tr>
            <td><strong>Performance Validations</strong></td>
            <td>Analyse des délais de signature par direction</td>
            <td>Hebdo</td>
            <td><span class="badge">XLSX</span></td>
            <td><button class="btn-link">Télécharger</button></td>
          </tr>
          <tr>
            <td><strong>Suivi Budgétaire Conventions</strong></td>
            <td>Engagement vs Réalisé sur les conventions financées</td>
            <td>Trimestriel</td>
            <td><span class="badge">XLSX</span></td>
            <td><button class="btn-link">Télécharger</button></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

</div>