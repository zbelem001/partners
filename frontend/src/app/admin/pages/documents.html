<div class="documents-page">
  
  <!-- HEADER -->
  <div class="page-header">
    <div class="header-left">
      <h1>Gestion Documentaire</h1>
      <p>Biblioth√®que centrale et mod√®les valid√©s</p>
    </div>
    <div class="header-right">
      <div class="search-box">
        <input type="text" placeholder="Rechercher un document...">
      </div>
      <button class="btn btn-primary" (click)="openUploadModal()">Uploader Fichier</button>
    </div>
  </div>

  <div class="doc-layout">
    
    <!-- SIDEBAR FOLDERS -->
    <aside class="doc-sidebar">
      <div class="folder-list">
        <div class="folder-item" *ngFor="let folder of folders" 
             [class.active]="folder.active" 
             (click)="selectFolder(folder.id)">
          <span class="folder-icon">üìÇ</span>
          <span class="folder-name">{{ folder.name }}</span>
          <span class="folder-count">{{ folder.count }}</span>
        </div>
      </div>

      <div class="storage-info">
        <h3>Espace de stockage</h3>
        <div class="progress-bar">
          <div class="fill" style="width: 65%"></div>
        </div>
        <div class="stats">6.5 GB utilis√©s / 10 GB</div>
      </div>
    </aside>

    <!-- FILE GRID -->
    <main class="file-area">
      <div class="filters-bar">
        <span class="filter-label">Trier par:</span>
        <select>
          <option>Plus r√©cents</option>
          <option>Nom (A-Z)</option>
          <option>Taille</option>
        </select>
        <div class="view-toggle">
          <button class="active">Grille</button>
          <button>Liste</button>
        </div>
      </div>

      <div class="file-grid">
        <div class="file-card" *ngFor="let file of files">
          <div class="card-top">
            <span class="confidentiality-tag" [ngClass]="getLevelBadge(file.level)">
              {{ file.level }}
            </span>
            <button class="menu-dots">‚ãÆ</button>
          </div>
          
          <div class="file-preview">
            <div class="type-badge" [ngClass]="getTypeColor(file.type)">
              {{ file.type }}
            </div>
          </div>

          <div class="file-info">
            <div class="file-name" title="{{ file.name }}">{{ file.name }}</div>
            <div class="file-meta">
              <span>{{ file.size }}</span> ‚Ä¢ <span>{{ file.date }}</span>
            </div>
            <div class="file-owner">Par: {{ file.owner }}</div>
          </div>
        </div>

        <!-- Add Card -->
        <div class="file-card add-new" (click)="openUploadModal()">
          <div class="add-circle">+</div>
          <span>Ajouter</span>
        </div>
      </div>
    </main>
  </div>

  <!-- UPLOAD MODAL -->
  <div class="modal-overlay" *ngIf="showUploadModal" (click)="closeUploadModal()">
    <div class="modal-content upload-modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>Uploader un Document</h2>
        <button class="btn-close" (click)="closeUploadModal()">√ó</button>
      </div>

      <div class="modal-body">
        <div class="upload-zone" 
             [class.dragover]="isDragOver"
             (dragover)="onDragOver($event)"
             (dragleave)="onDragLeave($event)"
             (drop)="onDrop($event)"
             (click)="fileInput.click()">
          <div class="upload-icon">üìÅ</div>
          <p class="upload-text">Glissez-d√©posez votre fichier ici ou cliquez pour parcourir</p>
          <p class="upload-subtext">Formats accept√©s: PDF, DOC, DOCX, XLS, XLSX, PPT, PPTX (Max 10MB)</p>
          <input #fileInput type="file" hidden (change)="onFileSelected($event)"
                 accept=".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx">
        </div>

        <div class="selected-file" *ngIf="selectedFile">
          <div class="file-icon">üìÑ</div>
          <div class="file-details">
            <strong>{{ selectedFile.name }}</strong>
            <span>{{ formatFileSize(selectedFile.size) }}</span>
          </div>
          <button class="btn-remove" (click)="removeFile()">√ó</button>
        </div>

        <div class="form-group">
          <label>Cat√©gorie *</label>
          <select [(ngModel)]="uploadCategory" class="form-select">
            <option value="">S√©lectionner une cat√©gorie</option>
            <option value="modele">Mod√®les & Templates</option>
            <option value="signed">Conventions Sign√©es</option>
            <option value="report">Rapports d'Activit√©s</option>
            <option value="legal">Documents 2iE</option>
            <option value="draft">Brouillons</option>
          </select>
        </div>

        <div class="form-group">
          <label>Niveau de confidentialit√©</label>
          <select [(ngModel)]="uploadConfidentiality" class="form-select">
            <option value="Public">Public</option>
            <option value="Interne">Interne</option>
            <option value="Confidentiel">Confidentiel</option>
          </select>
        </div>

        <div class="form-group">
          <label>Description (optionnel)</label>
          <textarea [(ngModel)]="uploadDescription" class="form-textarea" rows="3"
                    placeholder="Ajoutez une description du document..."></textarea>
        </div>

        <div class="upload-progress" *ngIf="isUploading">
          <div class="progress-bar">
            <div class="progress-fill" [style.width.%]="uploadProgress"></div>
          </div>
          <span class="progress-text">{{ uploadProgress }}%</span>
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn btn-outline" (click)="closeUploadModal()" [disabled]="isUploading">Annuler</button>
        <button class="btn btn-primary" (click)="uploadFile()" 
                [disabled]="!selectedFile || !uploadCategory || isUploading">
          {{ isUploading ? 'Upload en cours...' : 'Uploader' }}
        </button>
      </div>
    </div>
  </div>
</div>