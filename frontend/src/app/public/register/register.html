<app-header></app-header>

<main class="register-page">
  <div class="container">
    <div class="form-container">
      
      <!-- Progress Steps -->
      <div class="steps-container">
        <div class="step" *ngFor="let step of steps; let i = index" 
             [class.active]="i + 1 === currentStep" 
             [class.completed]="i + 1 < currentStep">
          <div class="step-circle">{{ i + 1 }}</div>
          <span class="step-title">{{ step.title }}</span>
          <div class="step-line" *ngIf="i < steps.length - 1"></div>
        </div>
      </div>

      <div class="form-header">
        <h2>Devenir Partenaire</h2>
        <p>Remplissez ce formulaire pour initier une collaboration avec 2iE.</p>
      </div>

      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        
        <!-- STEP 1: INFORMATION STRUCTURE -->
        <div class="form-step" *ngIf="currentStep === 1">
          <h3>Information sur la Structure</h3>
          
          <div class="form-group">
            <label>Nom de la structure *</label>
            <input type="text" formControlName="companyName" class="form-control" placeholder="Ex: Entreprise Tech SA">
            <span class="error" *ngIf="registerForm.get('companyName')?.invalid && registerForm.get('companyName')?.touched">
              Le nom est requis
            </span>
          </div>

          <div class="row">
            <div class="col">
              <div class="form-group">
                <label>Type de Partenariat *</label>
                <select formControlName="type" class="form-control">
                  <option value="">Sélectionner...</option>
                  <option value="Académique">Académique</option>
                  <option value="Recherche">Recherche</option>
                  <option value="Industriel">Industriel</option>
                  <option value="Institutionnel">Institutionnel</option>
                  <option value="ONG">ONG</option>
                </select>
                <span class="error" *ngIf="registerForm.get('type')?.invalid && registerForm.get('type')?.touched">
                  Le type est requis
                </span>
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <label>Année de création *</label>
                <input type="number" formControlName="creationYear" class="form-control" placeholder="Ex: 2005">
                <span class="error" *ngIf="registerForm.get('creationYear')?.invalid && registerForm.get('creationYear')?.touched">
                  Année valide requise
                </span>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <div class="form-group">
                <label>Secteur d'activité *</label>
                <input type="text" formControlName="sector" class="form-control" placeholder="Ex: Énergie Renouvelable">
                <span class="error" *ngIf="registerForm.get('sector')?.invalid && registerForm.get('sector')?.touched">
                  Le secteur est requis
                </span>
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <label>Pays *</label>
                <select formControlName="country" class="form-control">
                  <option value="">Sélectionner...</option>
                  <option value="Burkina Faso">Burkina Faso</option>
                  <option value="Cote d'Ivoire">Côte d'Ivoire</option>
                  <option value="Senegal">Sénégal</option>
                  <option value="Mali">Mali</option>
                  <option value="Niger">Niger</option>
                  <option value="France">France</option>
                  <option value="Autre">Autre</option>
                </select>
                <span class="error" *ngIf="registerForm.get('country')?.invalid && registerForm.get('country')?.touched">
                  Le pays est requis
                </span>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <div class="form-group">
                <label>Ville</label>
                <input type="text" formControlName="city" class="form-control" placeholder="Ex: Ouagadougou">
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <label>Site Web</label>
                <input type="url" formControlName="website" class="form-control" placeholder="https://www.exemple.com">
                <span class="error" *ngIf="registerForm.get('website')?.invalid && registerForm.get('website')?.touched">
                  URL valide requise (https://...)
                </span>
              </div>
            </div>
          </div>
        </div>

        <!-- STEP 2: CONTACTS -->
        <div class="form-step" *ngIf="currentStep === 2">
          <h3>Contact Principal</h3>
          
          <div class="row">
            <div class="col">
              <div class="form-group">
                <label>Nom complet *</label>
                <input type="text" formControlName="contactName" class="form-control" placeholder="Nom & Prénom">
                <span class="error" *ngIf="registerForm.get('contactName')?.invalid && registerForm.get('contactName')?.touched">
                  Le nom est requis
                </span>
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <label>Poste / Fonction *</label>
                <input type="text" formControlName="position" class="form-control" placeholder="Ex: DRH, Directeur Technique">
                <span class="error" *ngIf="registerForm.get('position')?.invalid && registerForm.get('position')?.touched">
                  La fonction est requise
                </span>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <div class="form-group">
                <label>Email professionnel *</label>
                <input type="email" formControlName="email" class="form-control" placeholder="email@structure.com">
                <span class="error" *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
                  <span *ngIf="registerForm.get('email')?.errors?.['required']">L'email est requis</span>
                  <span *ngIf="registerForm.get('email')?.errors?.['email']">Format email invalide</span>
                </span>
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <label>Téléphone *</label>
                <input type="tel" formControlName="phone" class="form-control" placeholder="+226 ...">
                <span class="error" *ngIf="registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched">
                  Le téléphone est requis
                </span>
              </div>
            </div>
          </div>
        </div>

        <!-- STEP 3: PROPOSITION DE COLLABORATION -->
        <div class="form-step" *ngIf="currentStep === 3">
          <h3>Votre Projet de Partenariat</h3>
          
          <div class="form-group">
            <label>Type d'accord souhaité *</label>
            <select formControlName="agreementType" class="form-control">
              <option value="">Sélectionner...</option>
              <option value="Cadre">Accord Cadre (Global)</option>
              <option value="Specifique">Accord Spécifique (Projet précis)</option>
              <option value="Inconnu">Je ne sais pas encore</option>
            </select>
            <span class="error" *ngIf="registerForm.get('agreementType')?.invalid && registerForm.get('agreementType')?.touched">
              Sélectionnez un type d'accord
            </span>
          </div>

           <div class="form-group">
            <label>Axes d'intérêt</label>
            <input type="text" formControlName="collaborationAreas" class="form-control" placeholder="Ex: Recherche & Innovation, Formation, Stages...">
          </div>

          <div class="form-group">
            <label>Description du projet / Motivation * (minimum 50 caractères)</label>
            <textarea formControlName="motivation" class="form-control" rows="5" placeholder="Décrivez brièvement comment vous souhaitez collaborer avec 2iE..."></textarea>
            <span class="error" *ngIf="registerForm.get('motivation')?.invalid && registerForm.get('motivation')?.touched">
              <span *ngIf="registerForm.get('motivation')?.errors?.['required']">La motivation est requise</span>
              <span *ngIf="registerForm.get('motivation')?.errors?.['minlength']">Minimum 50 caractères ({{ registerForm.get('motivation')?.value?.length || 0 }}/50)</span>
            </span>
          </div>

          <div class="row">
            <div class="col">
              <div class="form-group">
                <label>Budget estimé (FCFA/EUR) - Optionnel</label>
                <input type="text" formControlName="estimatedBudget" class="form-control">
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <label>Délai de mise en œuvre *</label>
                <select formControlName="deadline" class="form-control">
                  <option value="">Sélectionner...</option>
                  <option value="Urgent">Urgent (< 3 mois)</option>
                  <option value="Moyen">Moyen terme (3-6 mois)</option>
                  <option value="Long">Long terme (> 6 mois)</option>
                </select>
                <span class="error" *ngIf="registerForm.get('deadline')?.invalid && registerForm.get('deadline')?.touched">
                  Le délai est requis
                </span>
              </div>
            </div>
          </div>
        </div>

        <!-- STEP 4: DOCUMENTS -->
        <div class="form-step" *ngIf="currentStep === 4">
          <h3>Documents Requis</h3>
          <p class="info-text">Merci de joindre une présentation de votre structure pour nous aider à mieux vous connaître.</p>

          <div class="upload-box">
             <p>Glissez-déposez votre présentation (PDF) ici ou cliquez pour parcourir.</p>
             <button type="button" class="btn btn-outline sm">Choisir un fichier</button>
          </div>

          <div class="form-check">
             <input type="checkbox" id="confirm" formControlName="agreedToTerms">
             <label for="confirm">Je certifie l'exactitude des informations fournies. *</label>
          </div>
          <span class="error" *ngIf="registerForm.get('agreedToTerms')?.invalid && registerForm.get('agreedToTerms')?.touched">
            Vous devez accepter les conditions
          </span>
        </div>

        <!-- Navigation Buttons -->
        <div class="form-actions">
          <button type="button" class="btn btn-outline" (click)="prevStep()" *ngIf="currentStep > 1">Précédent</button>
          <div class="spacer"></div>
          <button type="button" class="btn btn-primary" (click)="nextStep()" *ngIf="currentStep < 4">Suivant</button>
          <button type="submit" class="btn btn-primary" *ngIf="currentStep === 4">Soumettre la demande</button>
        </div>

      </form>
    </div>
  </div>
</main>

<app-footer></app-footer>
